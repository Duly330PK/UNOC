<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>UNOC - Unified NOC UI</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        :root {
            --bg-color: #1a1a1a;
            --header-bg: #2a2a2a;
            --panel-bg: #242424;
            --border-color: #444;
            --text-color: #e0e0e0;
            --text-muted: #aaa;
            --accent-color: #4CAF50;
            --accent-red: #F44336;
            --accent-green: #4CAF50;
            --accent-blue-highlight: #00BFFF;
            --font-size-normal: 14px;
            --font-size-large: 16px;
        }
        body, html {
            margin: 0; padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color); color: var(--text-color);
            height: 100vh; overflow: hidden; display: flex; flex-direction: column;
        }
        header {
            background-color: var(--header-bg);
            padding: 10px 20px;
            border-bottom: 1px solid var(--border-color);
            flex-shrink: 0;
        }
        h1 { font-size: 1.5em; }
        h2 { font-size: 1.2em; border-bottom: 1px solid #555; padding-bottom: 8px; margin: 0 0 12px 0; }
        
        main {
            display: flex;
            flex-grow: 1;
            height: calc(100% - 100px);
        }
        
        #left-sidebar {
            width: 25%;
            display: flex;
            flex-direction: column;
            border-right: 1px solid var(--border-color);
            background-color: var(--panel-bg);
        }
        #center-column {
            width: 50%;
            display: flex;
            flex-direction: column;
        }
        #right-sidebar {
            width: 25%;
            display: flex;
            flex-direction: column;
            background-color: var(--panel-bg);
            border-left: 1px solid var(--border-color);
        }

        #view-container {
            height: 70%;
            position: relative;
            border-bottom: 1px solid var(--border-color);
        }
        #event-log-panel {
            height: 30%;
            padding: 15px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        #network-container, #map-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--bg-color);
        }
        #map-container { z-index: 10; visibility: hidden; }
        #view-toggle {
            position: absolute; top: 10px; right: 10px; z-index: 20;
        }
        #view-toggle button {
            width: auto; padding: 8px 12px; background-color: rgba(42, 42, 42, 0.8);
        }
        
        .panel {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            overflow-y: auto;
            font-size: var(--font-size-normal);
        }
        #properties-panel, #event-log, #cli-panel { flex-grow: 1; }
        
        #event-log {
            overflow-y: auto;
            font-family: monospace;
            font-size: 13px;
            line-height: 1.4;
            list-style: none; padding: 0; margin: 0; 
        }
        #event-log li { padding: 4px 0; border-bottom: 1px solid #333; }
        #event-log li:first-child { color: var(--accent-color); }
        
        #cli-panel {
            padding: 15px;
            display: flex;
            flex-direction: column;
            overflow: visible;
        }
        #cli-output {
            flex-grow: 1;
            overflow-y: auto;
            font-family: monospace;
            font-size: 13px;
            line-height: 1.4;
            margin-top: 15px;
        }
        #cli-interaction-area {
            position: relative;
        }
        #cli-input-wrapper {
            display: flex;
            align-items: center;
        }
        #cli-prompt { font-family: monospace; padding-right: 8px; font-size: var(--font-size-large); color: var(--text-muted); }
        #cli-input {
            flex-grow: 1;
            background-color: #2c2c2c;
            border: 1px solid #555;
            color: #00ff00;
            font-family: monospace;
            font-size: var(--font-size-large);
            padding: 8px;
            margin: 0;
            border-radius: 3px;
        }
        #cli-input:focus { outline: none; border-color: var(--accent-blue-highlight); }
        
        #cli-suggestions {
            position: absolute;
            top: 100%; 
            left: 0;
            right: 0;
            max-height: 150px;
            overflow-y: auto;
            background-color: #2c2c2c;
            border: 1px solid #555;
            border-top: none;
            z-index: 1000;
        }
        .suggestion-item { padding: 8px 12px; cursor: pointer; color: #ddd; font-family: monospace; }
        .suggestion-item:hover, .suggestion-item.active { background-color: #007BFF; color: white; }
        
        input, button, select {
            padding: 10px; margin-bottom: 10px; border-radius: 4px;
            border: 1px solid #666; background-color: #333;
            color: var(--text-color); font-size: var(--font-size-normal);
        }
        select { width: 100%; }
        .button-group { display: flex; gap: 10px; flex-wrap: wrap; }
        .input-group { display: flex; gap: 10px; }
        .input-group input { flex-grow: 1; margin-bottom: 0; }
        .input-group button { margin-bottom: 0; }
        button { cursor: pointer; background-color: #007BFF; border-color: #007BFF; font-weight: bold; }
        button:hover { background-color: #0056b3; }
        button:disabled { background-color: #555; border-color: #666; cursor: not-allowed; }
        
        #hud { display: flex; justify-content: space-around; background-color: #2c2c2c; padding: 10px; border-bottom: 1px solid #444; flex-shrink: 0; }
        .hud-item { text-align: center; }
        .hud-item h3 { margin: 0; font-size: 14px; color: #aaa; text-transform: uppercase; }
        .hud-item p { margin: 5px 0 0; font-size: 22px; font-weight: bold; }
        
        #properties-content table, #ring-info table { width: 100%; border-collapse: collapse; font-size: var(--font-size-normal); }
        #properties-content th, #properties-content td, #ring-info td { padding: 8px; text-align: left; border-bottom: 1px solid #333; }
        #properties-content th { width: 35%; color: var(--text-muted); }
        
        #ring-panel .status-blocking { color: #FFC107; font-weight: bold; }
        #ring-panel .status-forwarding { color: var(--accent-green); font-weight: bold; }
        
        .loader { color: var(--text-muted); font-style: italic; }
        .signal-good { color: var(--accent-green); font-weight: bold; }
        .signal-warning { color: #FFC107; font-weight: bold; }
        .signal-los { color: var(--accent-red); font-weight: bold; }
        
        #modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.7); z-index: 1000;
            display: flex; justify-content: center; align-items: center;
        }
        #modal-overlay.hidden { display: none; }
        #modal-box {
            background-color: var(--panel-bg); padding: 25px; border-radius: 8px;
            border: 1px solid var(--border-color); width: 90%; max-width: 500px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        #modal-box h2 { margin-top: 0; border-bottom: none; }
        #modal-message { font-size: var(--font-size-normal); line-height: 1.5; }
        #modal-buttons { margin-top: 20px; display: flex; justify-content: flex-end; gap: 10px; }
        #modal-buttons button { margin-bottom: 0; }
        .modal-btn-primary { background-color: var(--accent-color); border-color: var(--accent-color); }
        .modal-btn-danger { background-color: var(--accent-red); border-color: var(--accent-red); }
        .modal-btn-secondary { background-color: #555; border-color: #666; }

    </style>
</head>
<body>
    <header><h1>UNOC - Unified NOC UI</h1></header>

    <div id="hud">
        <div class="hud-item"><h3>Ger√§te Online</h3><p id="hud-devices">...</p></div>
        <div class="hud-item"><h3>Links Up</h3><p id="hud-links">...</p></div>
        <div class="hud-item"><h3>Alarme</h3><p id="hud-alarms">...</p></div>
    </div>

    <main>
        <aside id="left-sidebar">
            <div id="cli-panel">
                <h2>Command Line</h2>
                <div id="cli-interaction-area">
                    <div id="cli-suggestions"></div>
                    <div id="cli-input-wrapper">
                        <span id="cli-prompt">UNOC></span>
                        <input type="text" id="cli-input" placeholder="Befehl eingeben (z.B. 'help')...">
                    </div>
                </div>
                <div id="cli-output"></div>
            </div>
        </aside>

        <div id="center-column">
             <div id="view-container">
                <div id="network-container"></div>
                <div id="map-container"></div>
                <div id="view-toggle">
                    <button type="button" id="toggle-btn">Kartenansicht</button>
                </div>
            </div>
            <div id="event-log-panel" class="panel">
                <h2>Event Log</h2>
                <ul id="event-log"><li class="loader">Lade Events...</li></ul>
            </div>
        </div>

        <aside id="right-sidebar">
            <div id="properties-panel" class="panel">
                <h2>Eigenschaften</h2>
                <div id="properties-content" class="loader">Kein Element ausgew√§hlt</div>
            </div>
            <div id="ring-panel" class="panel">
                <h2>Ring Status</h2>
                <div id="ring-info" class="loader">Lade Ring-Status...</div>
            </div>
            <div id="controls-panel" class="panel">
                <h2>Steuerung</h2>
                <div class="button-group">
                    <button type="button" id="undo-btn" disabled>Undo</button>
                    <button type="button" id="redo-btn" disabled>Redo</button>
                    <button type="button" id="reset-highlight-btn" style="background-color: #555;">Reset Highlight</button>
                </div>
            </div>
            <div id="scenario-panel" class="panel">
                <h2>Szenarien</h2>
                <select id="splitter-select" aria-label="Splitter for fiber cut scenario"></select>
                <button type="button" id="fiber-cut-btn">Faserschnitt simulieren</button>
            </div>
            <div id="snapshot-panel" class="panel">
                <h2>Snapshots</h2>
                <div class="input-group">
                    <input type="text" id="snapshot-name" placeholder="Snapshot-Name...">
                    <button type="button" id="save-snapshot-btn">Speichern</button>
                    <button type="button" id="load-snapshot-btn">Laden</button>
                </div>
            </div>
        </aside>
    </main>
    
    <div id="modal-overlay" class="hidden">
        <div id="modal-box">
            <h2 id="modal-title"></h2>
            <p id="modal-message"></p>
            <div id="modal-buttons"></div>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>